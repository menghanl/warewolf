# 狼人杀助手网页App测试报告

## 1. 测试概述

- **测试目的:** 验证狼人杀助手网页App的核心功能是否符合`TODO.md`中的需求，并发现潜在的缺陷。
- **测试范围:** 游戏设置、核心游戏流程、特殊角色技能、UI/UX。
- **测试环境:** 浏览器环境（模拟）。

---

## 2. 测试用例与结果

### 2.1. 游戏设置界面 (Game Setup)

| 测试用例 ID | 测试描述 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **SETUP-01** | 检查玩家人数输入框 | 应能正常输入数字，且有最大/最小值限制（6-12）。 | 功能正常，可以输入数字。 | ✅ 通过 | |
| **SETUP-02** | 检查角色选择功能 | 所有预设角色应以复选框形式展示，并能被选中或取消。 | 功能正常，角色被默认全选。 | ✅ 通过 | |
| **SETUP-03** | 点击“开始游戏”按钮（正常流程） | 验证通过后，设置界面隐藏，游戏主界面显示。 | 功能正常。 | ✅ 通过 | |
| **SETUP-04** | 点击“开始游戏”按钮（未选择角色） | 弹出警告提示“请至少选择一个角色！”。 | 功能正常，弹出了预期的警告。 | ✅ 通过 | |
| **SETUP-05** | **[重要]** 角色与玩家人数验证 | `TODO.md`中提到需要验证角色数量和玩家人数是否匹配，但代码中未实现。 | 无论选择多少角色，游戏都会用一个硬编码的8人角色列表开始。 | ❌ **失败** | **缺陷**: `assignRoles`函数使用固定的角色列表，没有根据玩家的选择和人数来分配。这会导致角色分配与玩家设置完全不符。 |

### 2.2. 游戏主界面 (Game Board)

| 测试用例 ID | 测试描述 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **BOARD-01** | 玩家列表渲染 | 游戏开始后，根据玩家人数动态生成对应数量的玩家卡片。 | 功能正常，卡片被正确渲染。 | ✅ 通过 | 为了方便调试，角色被显示出来，这在最终版本中应被隐藏。 |
| **BOARD-02** | 游戏阶段标题显示 | 标题应能正确显示当前是“第X天 - 黑夜”或“第X天 - 白天”。 | 功能正常。 | ✅ 通过 | |
| **BOARD-03** | 游戏日志记录 | 游戏中的关键事件（如开始、淘汰、查验等）应被记录在日志中。 | 功能正常，日志可以自动滚动。 | ✅ 通过 | |
| **BOARD-04** | 重置游戏功能 | 点击“重置游戏”按钮后，应返回游戏设置界面，并清空日志。 | 功能正常。 | ✅ 通过 | |

### 2.3. 核心游戏逻辑

| 测试用例 ID | 测试描述 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **LOGIC-01** | 夜晚流程 - 狼人行动 | 狼人可以选择一名存活玩家进行淘汰。 | 功能正常。 | ✅ 通过 | |
| **LOGIC-02** | 夜晚流程 - 预言家行动 | 预言家可以选择一名玩家查验身份，并通过`alert`得知结果。 | 功能正常。 | ✅ 通过 | 使用`alert`提示不够友好，但符合基本功能。 |
| **LOGIC-03** | 夜晚流程 - 女巫用药（救） | 当有玩家被狼人选择淘汰时，女巫可以选择使用解药救人。解药只能用一次。 | 功能正常，解药使用后状态被正确记录。 | ✅ 通过 | |
| **LOGIC-04** | 夜晚流程 - 女巫用药（毒） | 女巫可以选择使用毒药淘汰一名玩家。毒药只能用一次。 | 功能正常，毒药使用后状态被正确记录。 | ✅ 通过 | |
| **LOGIC-05** | 白天流程 - 投票淘汰 | 主持人可以选择一名玩家进行投票淘汰。 | 功能正常。 | ✅ 通过 | |
| **LOGIC-06** | **[重要]** 警长竞选逻辑 | `TODO.md`中提到需要实现警长竞选，但代码中此功能缺失。 | 日志中仅有一条“请进行警长竞选”的提示，没有实际功能。 | ❌ **失败** | **缺陷**: 警长竞选是游戏的核心部分，目前完全没有实现。 |
| **LOGIC-07** | 胜利条件判断 | 当狼人全部出局或狼人数量超过好人时，游戏结束并宣布胜利方。 | 功能正常。 | ✅ 通过 | |

### 2.4. 特殊角色技能

| 测试用例 ID | 测试描述 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **SKILL-01** | 猎人技能 | 猎人被淘汰（投票或狼人）后，可以选择带走一名玩家。 | 功能正常。 | ✅ 通过 | |
| **SKILL-02** | 白痴技能 | 白痴被投票出局后，会翻牌并保留在场上，但失去投票权。 | 功能正常，玩家卡片样式会改变。 | ✅ 通过 | 代码中没有明确阻止白痴投票的逻辑，但由于投票是手动选择，暂不构成严重问题。 |

---

## 3. 总结与建议

### 3.1. 主要缺陷 (Bugs)

1.  **【严重】角色分配逻辑错误 (SETUP-05):** 游戏完全忽略了用户在设置阶段选择的角色和玩家人数，始终使用一个固定的8人配置。这是最严重的缺陷，导致游戏无法按预期配置进行。
2.  **【严重】警长竞选功能缺失 (LOGIC-06):** 警长竞选是游戏的核心机制之一，目前完全没有实现，导致游戏流程不完整。

### 3.2. 改进建议

1.  **修复角色分配逻辑:** `assignRoles`函数需要被重构，使其能够根据`playerCount`和`selectedRoles`参数动态生成和分配角色。需要加入验证逻辑，确保角色数量和阵营配置对于玩家人数是合理的。
2.  **实现警长竞选:** 在第一天白天，需要加入一个专门的警长竞选阶段。这包括：
    - 允许玩家将自己标记为警长候选人。
    - 为警长候选人提供发言阶段。
    - 实现一个投票流程来选举警长。
    - 为当选警长的玩家添加特殊的UI标记（例如，一个警徽图标）。
3.  **优化UI/UX:**
    - **预言家查验:** 使用模态框（Modal）或在页面上更优雅地显示查验结果，而不是使用突兀的`alert`。
    - **状态显示:** 优化玩家卡片的视觉效果，用更清晰的图标或颜色来区分“死亡”、“警长”、“已翻牌白痴”等状态。
    - **响应式设计:** `TODO.md`中提到响应式设计，目前在移动设备上布局可能存在问题，需要进一步测试和优化。

### 3.3. 总体评价

该项目成功地搭建了狼人杀助手的基本框架，并实现了大部分核心的夜晚/白天流程和部分特殊角色的技能。

然而，由于存在两个严重的功能缺陷（角色分配和警长竞选），目前该应用还无法完整地进行一场标准规则的游戏。

**建议开发团队优先修复上述两个严重缺陷，然后再进行UI/UX的优化。**
